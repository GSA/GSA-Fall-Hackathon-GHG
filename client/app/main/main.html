<div ng-include="'components/navbar/navbar.html'"></div>

<script>
  selectedAgency = null;

  function loadAgencies() {
    $.ajax({
      url: "/getAgencies",
      context: document.body
    }).done(function(data) {
      if(selectedAgency) {
        selectedAgency.destroy();
      }

      selectedAgency = $('#selectedAgency').selectize({
        options: data,
        labelField: 'agyName',
        valueField: 'agyName',
        searchField: 'agyName',
        onChange: function(agency) { agencySelected(agency) }
      })[0].selectize;

      //$('#cities').removeClass('hide');
    });

    function agencySelected(agency){
      console.log("here");
    }
  }
</script>

<header class="hero-unit" id="banner">
  <div class="container">
    <h1>Greenhouse Gas Emission Reduction Tool</h1>
    <p class="lead">Which agency are you interested in?</p>
    <div class="col-md-offset-3 col-md-6">
      <select id="selectedAgency" placeholder="Type an agency name"></select>
    </div>
    <script>loadAgencies();</script>
  </div>
</header>

<div class="container">
  <div class="row">
    <div class="col-lg-12">
      <h1 class="page-header">Features:</h1>
      <ul class="nav nav-tabs nav-stacked col-md-4 col-lg-4 col-sm-6" ng-repeat="thing in awesomeThings">
        <li><a href="#" tooltip="{{thing.info}}">{{thing.name}}</a></li>
      </ul>
    </div>
  </div>
</div>

<footer class="footer">
  <div class="container">
      <p>Angular Fullstack v2.1.1 |
        <a href="https://twitter.com/tyhenkel">@tyhenkel</a> |
         <a href="https://github.com/DaftMonk/generator-angular-fullstack/issues?state=open">Issues</a></p>
  </div>
</footer>
